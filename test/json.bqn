âŸ¨Pâ‡ParseâŸ© â† â€¢Import "../json.bqn"

_fails â† {0âˆ˜ğ”½âŠ1}

# Numbers
! 5.125 â‰¡ P "5.125"
! Â¯2e3  â‰¡ P "-2e+3"
! 0     â‰¡ P "0e25"
! P _fails "03"
! P _fails "-001.2e-1"
! P _fails ".3"
! P _fails "3.e2"
! "0"       â‰¡ Pâ¼ 0
! "-2.5e-9" â‰¡ Pâ¼ Â¯2.5eÂ¯9
! Pâ¼_fails Â¯âˆ
! Pâ¼_fails Ã·Ëœ0

# Strings
Q â† '"'âŠ¸(âˆ¾âˆ¾âŠ£)
! ".?ğ•©"          â‰¡ P Q".?ğ•©"
! ""             â‰¡ P Q""
! ((@+8)âˆ¾"b""c") â‰¡ P Q"\bb\""c"
! "y2Ã€gau"       â‰¡ P Q"y2\u00C0ga\u0075"
! "ğ•¨Ã—ğ•©"          â‰¡ P Q"\ud835\uDd68Ã—\uD835\udd69"
! P _fails Q"ab\cd"
! P _fails Q"\u12"
! P _fails Q"\uDd68\ud835"
! "" QâŠ¸â‰¡ Pâ¼ ""
! "ab\\c\""" QâŠ¸â‰¡ Pâ¼ "ab\c"""
! "\u0006\u0007\b\t\n\u000B" QâŠ¸â‰¡ Pâ¼ @+6+â†•6
! "\u001F !" QâŠ¸â‰¡ Pâ¼ @+31â€¿32â€¿33

# Constants
! âˆ§Â´ (< â‰¡ P)Â¨ "true"â€¿"false"â€¿"null"
! P _fails "test"
! âˆ§Â´ (âŠ¢ â‰¡ Pâ¼âˆ˜<)Â¨ "true"â€¿"false"â€¿"null"
! Pâ¼_fails <"test"

# Collections
! P _fails ""
! âˆ§Â´ P _failsâˆ˜â¥ŠÂ¨ "[]{}"
! P _fails "{[}]"
! P _fails "[1,]"
! P _fails "2,3"
! P _fails "{""key"":}"
! P _fails "[""key"":4]"
! 3â€¿2â€¿1   â‰¡ P "[3,2.00,1e0]"
! âŸ¨âŸ©      â‰¡ P "[]"
! âŸ¨âŸ©â€¿1â€¿âŸ¨âŸ© â‰¡ P "[[],1,[]]"
! (â†•2â€¿0)  â‰¡ P "{}"
! ("ab\c"â€¿""â‰âŸ¨2,<"false"âŸ©) â‰¡ P "{""ab\\c"":2, """":false}"
! "[]" â‰¡ Pâ¼ âŸ¨âŸ©
! "[]" â‰¡ Pâ¼ â†•0
! "[-1,""str"",false]" â‰¡ Pâ¼ âŸ¨Â¯1,"str",<"false"âŸ©
! "{}" â‰¡ Pâ¼ 2â€¿0â¥ŠâŸ¨âŸ©
! "{""key"":4}" â‰¡ Pâ¼ â‰Ë˜"key"â€¿4

! Pâ¼_fails 'c'
! Pâ¼_fails 'c'â€¿0â€¿'d'â€¿2
! Pâ¼_fails {â‡}
! Pâ¼_fails {âŒœ}
! Pâ¼_fails 1â€¿1â€¿1â¥Š@
! Pâ¼_fails â‰"k0"â€¿"k1"â‰2â€¿3

# Combined
! â‰¡âŸœPÂ´ âŸ¨
  âŸ¨<"null", "k0"â€¿"key1"â‰âŸ¨<"true",6.25e9â€¿2â€¿3âŸ©, âŸ¨"43",43âŸ©âŸ©
  "[null,{""k0"":true,""key1"":[6.25e+9,2,3]},[""43"",43]]"
âŸ©
! Pâ¼âŠ¸â‰¡Â´ âŸ¨
  âŸ¨<"null", "k0"â€¿"key1"â‰âŸ¨<"true",6.25â€¿2â€¿3âŸ©, âŸ¨"43",43âŸ©âŸ©
  "[null,{""k0"":true,""key1"":[6.25,2,3]},[""43"",43]]"
âŸ©
! (6â¥Š<2â€¿0â¥Š0) â‰¡ P "["âˆ¾"]"Â«18â¥Š",{}"

â€¢Out "All passed!"
